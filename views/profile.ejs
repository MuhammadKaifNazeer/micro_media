<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= user.name %> - Mini Media</title>
    <link rel="stylesheet" href="/stylesheets/style.css" />
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body>
    <div class="w-full min-h-screen bg-zinc-900 text-white p-10">
      <div
        class="navbar w-full flex justify-center lg:justify-end items-center"
      >
        <div
          class="w-max flex justify-center items-center gap-2 border rounded-full p-1"
        >
          <a
            class="bg-green-500 rounded-full px-3 py-1 inline-block duration-100 font-semibold"
            href="/createpost"
            >Create Post</a
          >
          <a
            class="hover:bg-zinc-700 rounded-full px-3 py-1 inline-block duration-100"
            href="/feed"
            >Feed</a
          >
          <a
            class="hover:bg-zinc-700 rounded-full px-3 py-1 inline-block duration-100"
            href="/profile"
            >Profile</a
          >
          <a
            class="hover:bg-zinc-700 rounded-full px-3 py-1 inline-block duration-100"
            href="/logout"
            >Logout</a
          >
        </div>
      </div>
      <div class="flex gap-3 items-start">
        <div class="w-10 h-10 rounded-md overflow-hidden">
          <img
            class="w-full h-full object-cover"
            src="/images/uploads/<%= user.profilepic %>"
            alt=""
          />
        </div>
        <h3 class="text-4xl font-semibold">
          <span class="font-bold">Hello</span>, <%= user.name %>
        </h3>
      </div>
      <h5 class="mb-5 mt-3">you can create a new post.</h5>
      <div class="w-full flex justify-center lg:justify-start items-center">
        <div
          class="w-max flex justify-center items-center gap-2 border rounded-full p-1"
        >
          <a
            class="bg-green-500 rounded-full px-3 py-1 inline-block duration-100 font-semibold"
            href="/createpost"
            >Create Post</a
          >
          <a
            class="hover:bg-zinc-700 rounded-full px-3 py-1 inline-block duration-100"
            href="/profile/upload"
            >Upload Profile Pic</a
          >
        </div>
      </div>
      <div class="posts mt-10">
        <h3 class="text-zinc-400">Your Posts</h3>
        <% if(user.posts.length > 0){ %>
        <div class="postcontainer mt-5 gap-4">
          <% user.posts.reverse().forEach(function(post){ %>
          <div
            class="post mb-4 p-4 border border-zinc-700 bg-zinc-800 rounded-md"
          >
            <div class="flex gap-3 items-start mb-2">
              <div class="w-[3rem] h-[3rem] rounded-md overflow-hidden">
                <img
                  class="w-full h-full object-cover"
                  src="/images/uploads/<%= user.profilepic %>"
                  alt="Profile Picture"
                />
              </div>
              <div class="flex flex-col justify-center items-start">
                <h2 class="text-xl font-bold"><%= user.name %></h2>
                <h4 class="text-green-500 text-md">@<%= user.username %></h4>
              </div>
            </div>
            <p class="text-sm tracking-tight"><%= post.content %></p>
            <small class="mt-2 inline-block"
              ><%= post.likes.length %> Likes</small
            >
            <div class="btns flex gap-4 mt-1">
              <a
                class="text-green-500 px-2 py-1 hover:bg-zinc-700 duration-100 rounded-md"
                href="/like/<%= post._id %>"
              >
                <%= post.likes.indexOf(user._id) === -1 ? "Like" : "Unlike" %>
              </a>
              <a
                class="text-zinc-600 px-2 py-1 hover:bg-zinc-700 duration-100 rounded-md hover:text-white"
                href="/edit/<%= post._id %>"
                >Edit</a
              >
              <a
                class="text-zinc-600 px-2 py-1 hover:bg-zinc-700 duration-100 rounded-md hover:text-white"
                href="/delete/post/<%= post._id %>"
                >Delete</a
              >
            </div>
          </div>
          <% }) %>
        </div>
        <% } else { %>
        <p class="text-md">
          No posts yet.
          <a href="/createpost" class="text-green-500 font-bold">Create Post</a>
        </p>
        <% } %>
      </div>
    </div>
  </body>
</html>
